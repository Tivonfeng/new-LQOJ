# Python二级易错点避坑指南

> 基于408道真题深度分析，提炼高频陷阱
>
> **适用对象**：GESP Python二级考生
> **目标**：避开丢分陷阱，冲刺满分

---

## 目录

1. [列表操作陷阱](#一列表操作陷阱)
2. [字典操作陷阱](#二字典操作陷阱)
3. [元组操作陷阱](#三元组操作陷阱)
4. [字符串操作陷阱](#四字符串操作陷阱)
5. [循环结构陷阱](#五循环结构陷阱)
6. [条件判断陷阱](#六条件判断陷阱)
7. [索引访问陷阱](#七索引访问陷阱)
8. [类型转换陷阱](#八类型转换陷阱)

---

## 一、列表操作陷阱

### 陷阱1：append() vs extend()

```python
# ❌ 错误：以为append会展开列表
list1 = [1, 2, 3]
list1.append([4, 5])
print(list1)  # [1, 2, 3, [4, 5]]  ← 不是[1,2,3,4,5]！

# ✅ 正确：extend()才是展开
list1 = [1, 2, 3]
list1.extend([4, 5])
print(list1)  # [1, 2, 3, 4, 5]
```

**真题对应**：2306-5、2312-15

### 陷阱2：列表复制指向同一对象

```python
# ❌ 错误：修改新列表会影响原列表
list1 = [1, 2, 3]
list2 = list1
list2.append(4)
print(list1)  # [1, 2, 3, 4]  ← 被修改了！

# ✅ 正确：创建新列表
list2 = list1[:]        # 切片复制
list2 = list1.copy()    # copy方法
list2 = list(list1)     # 工厂函数
```

### 陷阱3：remove()只删除第一个

```python
# ❌ 错误：以为会删除所有
list1 = [1, 2, 2, 3]
list1.remove(2)
print(list1)  # [1, 2, 3]  ← 只删除了第一个2！

# ✅ 正确：删除所有需要循环
list1 = [1, 2, 2, 3]
# 方法1：while循环
while 2 in list1:
    list1.remove(2)
# 方法2：列表推导式
list1 = [x for x in list1 if x != 2]
```

### 陷阱4：pop()默认删除最后一个

```python
# ❌ 错误：忘记pop()的参数
list1 = [1, 2, 3, 4]
list1.pop()       # 删除4
list1.pop(0)     # 删除1（第一个）
print(list1)      # [2, 3]
```

---

## 二、字典操作陷阱

### 陷阱1：键不存在时用[]访问会报错

```python
d = {'name': 'Tom', 'age': 18}

# ❌ 错误：键不存在会KeyError
print(d['gender'])  # KeyError！

# ✅ 正确：用get()方法
print(d.get('gender'))       # None
print(d.get('gender', '未知'))  # '未知'（默认值）
```

### 陷阱2：字典的键必须是可哈希的

```python
# ❌ 错误：列表不可作为字典键
d = {[1, 2]: 'test'}  # TypeError！

# ✅ 正确：元组可以作为键（不可变）
d = {(1, 2): 'test'}  # 合法
```

### 陷阱3：遍历字典时修改字典

```python
d = {'a': 1, 'b': 2, 'c': 3}

# ❌ 错误：遍历时修改可能出错
for key in d:
    if key == 'a':
        del d[key]  # RuntimeError！

# ✅ 正确：先收集要删除的键
keys_to_delete = [k for k in d if k == 'a']
for k in keys_to_delete:
    del d[k]
```

---

## 三、元组操作陷阱

### 陷阱1：单元素元组必须有逗号

```python
# ❌ 错误：忘记逗号
t1 = (5)     # 这是整数，不是元组！
print(type(t1))  # <class 'int'>

# ✅ 正确：必须加逗号
t2 = (5,)    # 这才是元组
print(type(t2))  # <class 'tuple'>
```

### 陷阱2：元组不可修改

```python
t = (1, 2, 3)

# ❌ 错误：尝试修改元组
t[0] = 100   # TypeError！
t.append(4)  # AttributeError！

# ✅ 正确：创建新元组
t = t[:2] + (100,) + t[2:]  # 间接修改
```

### 陷阱3：元组和列表混淆

```python
# ❌ 错误：使用列表方法
t = (1, 2, 3)
t.pop()      # AttributeError！

# ✅ 正确：先转列表
lst = list(t)
lst.pop()
t = tuple(lst)
```

---

## 四、字符串操作陷阱

### 陷阱1：字符串不可修改

```python
s = "Hello"

# ❌ 错误：尝试修改字符串
s[0] = 'h'   # TypeError！

# ✅ 正确：创建新字符串
s = 'h' + s[1:]  # 'hello'
s = s.replace('H', 'h')  # 'hello'
```

### 陷阱2：split()默认分隔任意空白

```python
s = "a b  c"  # 多个空格

# ❌ 错误：以为会保留空字符串
parts = s.split()   # ['a', 'b', 'c']  ← 自动过滤空字符串！
parts = s.split(' ')  # ['a', '', 'b', '', 'c']

# ✅ 根据需求选择
```

### 陷阱3：字符串拼接用+不用*重复

```python
# ❌ 错误：用*是重复不是拼接
s = "Hello" * " "   # TypeError！

# ✅ 正确：+拼接，*重复
s1 = "Hello" + " " + "Python"  # 'Hello Python'
s2 = "Ha" * 3  # 'HaHaHa'
```

---

## 五、循环结构陷阱

### 陷阱1：for循环的else会正常执行

```python
# ❌ 错误：以为break会阻止else
for i in range(3):
    print(i)
    if i == 1:
        break
else:
    print("完成")  # 不会执行！

# ✅ 正确：break会跳过else
```

### 陷阱2：while循环容易变成死循环

```python
# ❌ 错误：忘记递增
i = 0
while i < 5:
    print(i)
    # 忘记 i += 1  ← 死循环！
```

### 陷阱3：range()边界容易搞错

```python
# range(start, stop, step)
# stop是"不包括"的！

# ❌ 错误：1到10包括10
for i in range(1, 10):   # 1,2,3,4,5,6,7,8,9  ← 不包括10！
    print(i)

# ✅ 正确：end要+1
for i in range(1, 11):   # 1,2,3,4,5,6,7,8,9,10
    print(i)
```

---

## 六、条件判断陷阱

### 陷阱1：== vs is

```python
# ❌ 错误：用is比较值
list1 = [1, 2, 3]
list2 = [1, 2, 3]
print(list1 == list2)   # True（值相等）
print(list1 is list2)   # False（不同对象）

# ✅ 正确：值比较用==
# is用于判断是否是同一对象（内存地址）
```

### 陷阱2：链式比较

```python
# ❌ 错误：理解错误
x = 5
print(1 < x < 10)   # True ← 正确！
print(1 < x and x < 10)  # 等价
```

### 陷阱3：逻辑运算符优先级

```python
# not > and > or

# ❌ 错误：优先级搞错
True or False and False  # 等价于 True or (False and False) = True

# ✅ 正确：必要时加括号
(True or False) and False  # False
```

---

## 七、索引访问陷阱

### 陷阱1：负数索引

```python
lst = [1, 2, 3, 4, 5]

# ❌ 错误：负数索引从0开始？
lst[-1]   # 5（最后一个）
lst[-5]   # 1（第一个）
lst[-6]   # IndexError！

# ✅ 正确：-1是最后一个，-len()是第一个
```

### 陷阱2：切片越界

```python
lst = [1, 2, 3]

# ❌ 错误：担心越界
lst[0:100]   # 不会报错！返回[1, 2, 3]

# ✅ 正确：Python自动处理
```

### 陷阱3：切片步长

```python
lst = [1, 2, 3, 4, 5]

# ❌ 错误：步长为0
lst[::0]   # ValueError！

# ✅ 正确：步长不能为0
lst[::2]   # [1, 3, 5]
lst[::-1]  # [5, 4, 3, 2, 1]（反转）
```

---

## 八、类型转换陷阱

### 陷阱1：input()返回字符串

```python
# ❌ 错误：忘记转换类型
age = input("年龄:")
if age > 18:   # TypeError！字符串不能和整数比较
    print("成年")

# ✅ 正确：必须转换类型
age = int(input("年龄:"))
if age > 18:
    print("成年")
```

### 陷阱2：eval()的危险性

```python
# ❌ 危险：用户可能输入恶意代码
expr = input("输入表达式:")
result = eval(expr)  # 输入 os.system("rm -rf /") 就完了！

# ✅ 正确：避免使用eval()
# 或限制可用函数
import ast
ast.literal_eval("{'a': 1}")  # 安全评估
```

### 陷阱3：浮点数精度

```python
# ❌ 错误：浮点数精度问题
0.1 + 0.2  # 0.30000000000000004 ≠ 0.3！

# ✅ 正确：比较时用round()
abs(0.1 + 0.2 - 0.3) < 1e-10  # True
```

---

## 九、综合易错题集

### 题目1：列表嵌套
```python
ls=[['a','b'],['c','d']]
print(ls[0][1])
```
- A. 'a'
- B. 'b'
- C. 'c'
- D. 'd'

**答案**：B

**解析**：`ls[0]`是`['a','b']`，`ls[0][1]`是`'b'`。

### 题目2：字典遍历
```python
dic={'a':1,'b':2,'c':3}
for x in dic:
    print(x)
```
- A. 1,2,3
- B. a,b,c
- C. ('a',1),('b',2),('c',3)
- D. 报错

**答案**：B

**解析**：遍历字典默认遍历键。

### 题目3：元组不可变
```python
t=(1,2,3)
t[0]=100
```
- A. 100
- B. (100,2,3)
- C. 报错
- D. 无输出

**答案**：C

**解析**：元组不可修改，赋值会触发TypeError。

### 题目4：range步长
```python
for i in range(1, 10, 2):
    print(i)
```
- A. 1,2,3,4,5,6,7,8,9
- B. 1,3,5,7,9
- C. 1,3,5,7
- D. 2,4,6,8

**答案**：B

**解析**：range(1,10,2)生成1,3,5,7,9。

---

## 考场实战技巧

### 1. 读题仔细
- 注意"能"和"不能"的区别
- 注意"最后一个"和"第一个"
- 注意"包括"和"不包括"

### 2. 代码先跑一遍
- 遇到不确定的选项，可以模拟运行
- 注意边界条件和特殊值

### 3. 先做简单题
- 选择题先做有把握的
- 标记难题，回头再战

### 4. 检查漏斗
- 检查是否看清"错误"还是"正确"
- 检查索引是否从0开始
- 检查类型是否正确

---

> **避坑口诀**：
> - append是整体，extend才展开
> - 字典查键用get，防止报错用get
> - 元组元组括号圆，单个元素要逗号
> - 字符串不可改，创建新的来替换
> - input返回是字符串，类型转换莫忘记
> - 索引都是从0算，负数倒着往前算
