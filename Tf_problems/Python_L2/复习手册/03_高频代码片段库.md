# Python二级高频代码片段库

> 基于408道真题深度分析，提取高频代码模式
>
> **适用对象**：GESP Python二级考生
> **目标**：快速掌握高频代码模式

---

## 目录

1. [列表操作类](#一列表操作类)
2. [字典操作类](#二字典操作类)
3. [元组操作类](#三元组操作类)
4. [字符串操作类](#四字符串操作类)
5. [循环控制类](#五循环控制类)
6. [条件判断类](#六条件判断类)
7. [输入输出类](#七输入输出类)
8. [综合应用类](#八综合应用类)

---

## 一、列表操作类

### 1.1 列表创建

```python
# 方式1：直接创建
lst = [1, 2, 3, 4, 5]

# 方式2：range创建
lst = list(range(10))         # [0,1,2,3,4,5,6,7,8,9]
lst = list(range(1, 11))     # [1,2,3,4,5,6,7,8,9,10]
lst = list(range(0, 10, 2))  # [0,2,4,6,8]

# 方式3：列表推导式
lst = [i for i in range(10)]           # [0,1,2,3,4,5,6,7,8,9]
lst = [i*2 for i in range(5)]          # [0,2,4,6,8]
lst = [i for i in range(10) if i%2==0] # [0,2,4,6,8]
```

### 1.2 元素添加

```python
# append() - 末尾添加单个元素
lst = [1, 2, 3]
lst.append(4)       # [1, 2, 3, 4]
lst.append([5, 6])   # [1, 2, 3, 4, [5, 6]]

# extend() - 末尾添加多个元素（展开）
lst = [1, 2, 3]
lst.extend([4, 5])   # [1, 2, 3, 4, 5]

# insert() - 指定位置插入
lst = [1, 2, 3]
lst.insert(1, 9)     # [1, 9, 2, 3]
```

### 1.3 元素删除

```python
# pop() - 删除并返回末尾元素
lst = [1, 2, 3]
x = lst.pop()        # x=3, lst=[1, 2]

# pop(i) - 删除并返回指定位置元素
lst = [1, 2, 3]
x = lst.pop(1)       # x=2, lst=[1, 3]

# remove() - 删除第一个匹配项
lst = [1, 2, 2, 3]
lst.remove(2)        # [1, 2, 3]

# clear() - 清空列表
lst = [1, 2, 3]
lst.clear()          # []

# del - 删除指定元素或切片
lst = [1, 2, 3, 4, 5]
del lst[0]           # [2, 3, 4, 5]
del lst[1:3]         # [2, 5]
```

### 1.4 元素查找

```python
# index() - 查找元素位置
lst = [1, 2, 3, 2]
pos = lst.index(2)   # 1（第一个位置）

# count() - 统计元素个数
lst = [1, 2, 2, 3]
cnt = lst.count(2)   # 2

# in - 判断元素是否存在
lst = [1, 2, 3]
result = 2 in lst    # True
result = 4 in lst    # False
```

### 1.5 列表排序

```python
# sort() - 原地排序（修改原列表）
lst = [3, 1, 4, 1, 5]
lst.sort()           # [1, 1, 3, 4, 5]
lst.sort(reverse=True)  # [5, 4, 3, 1, 1]

# sorted() - 返回排序后的新列表
lst = [3, 1, 4, 1, 5]
new_lst = sorted(lst)    # [1, 1, 3, 4, 5]
new_lst = sorted(lst, reverse=True)  # [5, 4, 3, 1, 1]

# reverse() - 反转列表
lst = [1, 2, 3]
lst.reverse()         # [3, 2, 1]
```

### 1.6 列表复制

```python
# 切片复制
lst1 = [1, 2, 3]
lst2 = lst1[:]       # 新列表

# copy()方法
lst2 = lst1.copy()

# list()工厂函数
lst2 = list(lst1)
```

---

## 二、字典操作类

### 2.1 字典创建

```python
# 字面量创建
d = {'name': 'Tom', 'age': 18}

# dict()函数创建
d = dict(name='Tom', age=18)  # {'name': 'Tom', 'age': 18}
d = dict([('name', 'Tom'), ('age', 18)])

# 空字典
d = {}
d = dict()
```

### 2.2 字典访问

```python
d = {'name': 'Tom', 'age': 18}

# []访问（键不存在会报错）
name = d['name']     # 'Tom'
# name = d['gender']  # KeyError!

# get()访问（键不存在返回None）
gender = d.get('gender')          # None
gender = d.get('gender', '未知')  # '未知'（默认值）
```

### 2.3 字典修改

```python
d = {'name': 'Tom', 'age': 18}

# 添加/修改键值对
d['name'] = 'Jerry'    # 修改
d['gender'] = 'M'      # 添加
d['age'] = 20          # 修改

# update()合并字典
d.update({'score': 95, 'gender': 'F'})
```

### 2.4 字典删除

```python
d = {'name': 'Tom', 'age': 18, 'score': 95}

# pop() - 删除并返回值
age = d.pop('age')     # 18, d={'name':'Tom','score':95}

# del - 删除指定键
del d['score']         # d={'name':'Tom'}

# clear() - 清空字典
d.clear()              # {}
```

### 2.5 字典遍历

```python
d = {'name': 'Tom', 'age': 18, 'score': 95}

# 遍历键
for key in d.keys():
    print(key)

# 遍历值
for value in d.values():
    print(value)

# 遍历键值对
for key, value in d.items():
    print(f"{key}: {value}")

# 直接遍历字典（默认遍历键）
for key in d:
    print(key)
```

---

## 三、元组操作类

### 3.1 元组创建

```python
# 基本创建
t = (1, 2, 3)
t = 1, 2, 3

# 单元素元组（必须有逗号）
t = (5,)             # 元组
t = (5)              # 整数

# 空元组
t = ()
t = tuple()
```

### 3.2 元组操作

```python
t = (1, 2, 3, 4, 5)

# 索引访问
t[0]      # 1
t[-1]     # 5

# 切片操作
t[1:3]    # (2, 3)
t[:3]     # (1, 2, 3)
t[::2]    # (1, 3, 5)

# 连接
t + (6, 7)    # (1, 2, 3, 4, 5, 6, 7)

# 重复
t * 2         # (1, 2, 3, 4, 5, 1, 2, 3, 4, 5)

# 查找
t.index(3)    # 2
t.count(2)    # 1
len(t)        # 5
```

### 3.3 元组与列表转换

```python
# 元组转列表
t = (1, 2, 3)
lst = list(t)    # [1, 2, 3]

# 列表转元组
lst = [1, 2, 3]
t = tuple(lst)   # (1, 2, 3)
```

---

## 四、字符串操作类

### 4.1 字符串创建

```python
# 单引号
s = 'Hello'

# 双引号
s = "Hello"

# 三引号（多行）
s = '''Hello
World'''

# 转义字符
s = 'It\'s a test'
s = "Line1\nLine2"
```

### 4.2 字符串访问

```python
s = "Python"

# 索引访问
s[0]      # 'P'
s[-1]     # 'n'

# 切片
s[0:2]    # 'Py'
s[:3]     # 'Pyt'
s[::2]    # 'Pto'
s[::-1]   # 'nohtyP'（反转）
```

### 4.3 字符串方法

```python
s = "Hello Python"

# 大小写转换
s.upper()           # 'HELLO PYTHON'
s.lower()           # 'hello python'
s.title()           # 'Hello Python'

# 分割
s.split()           # ['Hello', 'Python']
s.split(',')        # ['Hello Python']

# 连接
lst = ['a', 'b', 'c']
'-'.join(lst)       # 'a-b-c'

# 替换
s.replace(' ', ',') # 'Hello,Python'

# 去除空白
s = "  abc  "
s.strip()           # 'abc'
s.lstrip()          # 'abc  '
s.rstrip()          # '  abc'

# 查找
s.find('lo')        # 3（找不到返回-1）
s.index('lo')       # 3（找不到报错）
s.count('l')        # 2

# 判断
s.startswith('H')   # True
s.endswith('n')     # True
s.isdigit()         # False
s.isalpha()         # False
```

### 4.4 字符串格式化

```python
# format方法
"{} {}".format("Hello", "Python")           # 'Hello Python'
"{1} {0}".format("Python", "Hello")         # 'Hello Python'
"{name} is {age}".format(name='Tom', age=18)

# f-string
name = 'Tom'
age = 18
f"{name} is {age}"                          # 'Tom is 18'

# %格式化
"%s is %d" % ('Tom', 18)                    # 'Tom is 18'
```

---

## 五、循环控制类

### 5.1 for循环

```python
# 基本循环
for i in range(5):
    print(i)      # 0,1,2,3,4

# 遍历列表
lst = ['a', 'b', 'c']
for item in lst:
    print(item)   # a,b,c

# 遍历字符串
for char in "abc":
    print(char)   # a,b,c

# 遍历字典
d = {'a': 1, 'b': 2}
for key in d:
    print(key)    # a,b
for value in d.values():
    print(value)  # 1,2
for k, v in d.items():
    print(k, v)   # a 1, b 2
```

### 5.2 while循环

```python
# 基本结构
i = 0
while i < 5:
    print(i)
    i += 1        # 0,1,2,3,4

# 死循环（需break退出）
while True:
    cmd = input("输入(q退出):")
    if cmd == 'q':
        break
```

### 5.3 break与continue

```python
# break - 跳出整个循环
for i in range(5):
    if i == 2:
        break
    print(i)      # 0, 1

# continue - 跳过本次循环
for i in range(5):
    if i == 2:
        continue
    print(i)      # 0, 1, 3, 4
```

### 5.4 循环else子句

```python
# 循环正常结束（无break）时执行
for i in range(3):
    print(i)
else:
    print("完成")  # 会执行

# break时else不执行
for i in range(3):
    if i == 1:
        break
    print(i)
else:
    print("不会执行")
```

---

## 六、条件判断类

### 6.1 if-elif-else

```python
# 单分支
if 条件:
    语句块

# 双分支
if 条件:
    语句块1
else:
    语句块2

# 多分支
if 条件1:
    语句块1
elif 条件2:
    语句块2
elif 条件3:
    语句块3
else:
    语句块4
```

### 6.2 逻辑运算

```python
# and - 逻辑与
True and True    # True
True and False   # False

# or - 逻辑或
True or False    # True
False or False   # False

# not - 逻辑非
not True         # False
not False        # True
```

### 6.3 比较运算

```python
# 相等/不等
a == b           # 值相等
a != b           # 值不等
a is b           # 同一对象
a is not b       # 不同对象

# 大小比较
a > b
a < b
a >= b
a <= b

# 成员运算
x in lst         # 在列表中
x not in lst
x in d           # 在字典键中
```

---

## 七、输入输出类

### 7.1 input()函数

```python
# 基本输入
name = input("请输入姓名:")      # 字符串

# 类型转换
age = int(input("年龄:"))        # 转整数
height = float(input("身高:"))   # 转浮点数

# eval()评估表达式
expr = input("输入表达式:")
result = eval(expr)              # 慎用！
```

### 7.2 print()函数

```python
# 基本输出
print("Hello")                 # 换行输出

# 多参数
print("Hello", "Python")        # 分隔符默认空格

# 指定分隔符
print("a", "b", "c", sep="-")  # a-b-c

# 不换行
print("a", end="")
print("b")                      # ab

# 格式化输出
name = "Tom"
age = 18
print(f"{name} is {age} years old")  # Tom is 18 years old
```

---

## 八、综合应用类

### 8.1 冒泡排序

```python
def bubble_sort(lst):
    n = len(lst)
    for i in range(n - 1):
        for j in range(n - 1 - i):
            if lst[j] > lst[j + 1]:
                lst[j], lst[j + 1] = lst[j + 1], lst[j]
    return lst

# 测试
lst = [64, 34, 25, 12, 22, 11, 90]
print(bubble_sort(lst))  # [11, 12, 22, 25, 34, 64, 90]
```

### 8.2 累加/累乘

```python
# 累加
s = 0
for i in range(1, 101):
    s += i
print(s)  # 5050

# 累乘
p = 1
for i in range(1, 6):
    p *= i
print(p)  # 120
```

### 8.3 查找元素

```python
# 线性查找
def linear_search(lst, target):
    for i, item in enumerate(lst):
        if item == target:
            return i
    return -1

# 测试
lst = [1, 3, 5, 7, 9]
print(linear_search(lst, 7))  # 3
print(linear_search(lst, 4))  # -1
```

### 8.4 统计出现次数

```python
# 方法1：count()
lst = [1, 2, 2, 3, 2, 4]
print(lst.count(2))  # 3

# 方法2：手动统计
def count_occurrences(lst, target):
    count = 0
    for item in lst:
        if item == target:
            count += 1
    return count

print(count_occurrences(lst, 2))  # 3
```

### 8.5 去重

```python
lst = [1, 2, 2, 3, 3, 3, 4]

# 方法1：转为集合
unique = list(set(lst))  # [1, 2, 3, 4]

# 方法2：保持顺序
unique = []
for item in lst:
    if item not in unique:
        unique.append(item)
```

### 8.6 最大/最小值

```python
lst = [1, 3, 5, 7, 9]

# 方法1：max()/min()
print(max(lst))  # 9
print(min(lst))  # 1

# 方法2：手动查找
def find_max(lst):
    max_val = lst[0]
    for item in lst:
        if item > max_val:
            max_val = item
    return max_val
```

---

## 附录：常见错误对照表

| 错误写法 | 正确写法 | 说明 |
|----------|----------|------|
| `lst.append([1,2])` | `lst.extend([1,2])` | append是整体添加 |
| `t = (5)` | `t = (5,)` | 单元素元组需要逗号 |
| `d['key']` | `d.get('key')` | get()防止KeyError |
| `s[0] = 'h'` | `s = 'h' + s[1:]` | 字符串不可修改 |
| `range(1,10)` | `range(1,11)` | stop不包括 |
| `list1 = list2` | `list1 = list2[:]` | 浅拷贝问题 |
| `remove()`一次删全部 | `while x in lst: lst.remove(x)` | remove()只删第一个 |
| `input()`直接运算 | `int(input())` | input返回字符串 |

---

> **使用建议**：
> 1. 每天背诵常用代码片段
> 2. 动手敲代码加深记忆
> 3. 理解代码逻辑而非死记硬背
> 4. 多练习真题检验掌握程度
