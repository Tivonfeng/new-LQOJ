# C++三级高频代码片段库

> 基于2023.6-2025.12共11套真题（275题）代码模式总结
>
> **适用对象**：GESP C++三级考生
> **目标**：掌握核心代码模式，快速读懂题目

---

## 目录

1. [进制转换类](#一进制转换类)
2. [位运算类](#二-位运算类)
3. [数组操作类](#三数组操作类)
4. [字符串操作类](#四字符串操作类)
5. [函数基础类](#五函数基础类)
6. [数据类型类](#六数据类型类)
7. [运算符运算类](#七运算符运算类)
8. [综合应用类](#八综合应用类)

---

## 一、进制转换类

### 1.1 十进制转二进制

```cpp
// 方法1：除2取余法
int decimal = 10;
string binary = "";
int temp = decimal;
while (temp > 0) {
    binary = char('0' + temp % 2) + binary;
    temp /= 2;
}
// binary = "1010"

// 空输入处理
if (decimal == 0) binary = "0";
```

### 1.2 十进制转八进制

```cpp
int decimal = 10;
cout << oct << decimal;  // 输出12
cout << dec;             // 切回十进制
```

### 1.3 十进制转十六进制

```cpp
int decimal = 255;
cout << hex << decimal;  // 输出ff
cout << dec;             // 切回十进制
```

### 1.4 二进制转十进制

```cpp
string binary = "1101";
int decimal = 0;
for (char c : binary) {
    decimal = decimal * 2 + (c - '0');
}
// decimal = 13
```

### 1.5 二进制小数转十进制

```cpp
// 0.101 = 1×2⁻¹ + 0×2⁻² + 1×2⁻³ = 0.625
string binary = "0.101";
int pos = binary.find('.');
string intPart = binary.substr(0, pos);      // "0"
string fracPart = binary.substr(pos + 1);     // "101"

// 整数部分
int decimal = 0;
for (char c : intPart) {
    decimal = decimal * 2 + (c - '0');
}

// 小数部分
double fracDecimal = 0;
for (int i = 0; i < fracPart.length(); i++) {
    fracDecimal += (fracPart[i] - '0') * pow(2, -(i + 1));
}

decimal += fracDecimal;  // 0.625
```

---

## 二、位运算类

### 2.1 判断奇偶

```cpp
// 使用按位与
if (n & 1) {
    // n是奇数
} else {
    // n是偶数
}
```

### 2.2 获取第n位

```cpp
// 获取从右往左第n位（n从0开始）
int getBit(int num, int n) {
    return (num >> n) & 1;
}

// 示例
int num = 10;  // 1010
getBit(num, 0);  // 0（个位）
getBit(num, 1);  // 1
getBit(num, 2);  // 0
getBit(num, 3);  // 1
```

### 2.3 设置第n位

```cpp
// 设置第n位为1
int setBit(int num, int n) {
    return num | (1 << n);
}

// 设置第n位为0
int clearBit(int num, int n) {
    return num & ~(1 << n);
}
```

### 2.4 交换两个数（异或法）

```cpp
a = a ^ b;
b = a ^ b;  // b = a
a = a ^ b;  // a = b
```

### 2.5 左移右移

```cpp
int a = 5;
int left = a << 2;   // 20（5 × 4）
int right = a >> 1;   // 2（5 ÷ 2，取整）

// 负数的右移（算术右移）
int b = -5;
b >> 1;  // -3（保留符号位）
```

### 2.6 按位与、或、异或

```cpp
int a = 5;   // 0101
int b = 3;   // 0011

int andResult = a & b;   // 0001 = 1
int orResult = a | b;    // 0111 = 7
int xorResult = a ^ b;   // 0110 = 6
```

---

## 三、数组操作类

### 3.1 数组初始化

```cpp
// 完全初始化
int arr1[5] = {1, 2, 3, 4, 5};

// 部分初始化（其余为0）
int arr2[5] = {1, 2, 3};

// 全部初始化为0
int arr3[5] = {0};

// 推断长度
int arr4[] = {1, 2, 3};  // 长度为3
```

### 3.2 数组元素交换

```cpp
// 方法1：临时变量
int temp = arr[i];
arr[i] = arr[j];
arr[j] = temp;

// 方法2：异或交换（无临时变量）
arr[i] ^= arr[j];
arr[j] ^= arr[i];
arr[i] ^= arr[j];
```

### 3.3 数组遍历

```cpp
int arr[5] = {1, 2, 3, 4, 5};

// 正序遍历
for (int i = 0; i < 5; i++) {
    cout << arr[i];
}

// 逆序遍历
for (int i = 4; i >= 0; i--) {
    cout << arr[i];
}
```

### 3.4 数组求和

```cpp
int arr[] = {1, 2, 3, 4, 5};
int sum = 0;
for (int i = 0; i < 5; i++) {
    sum += arr[i];
}
// sum = 15
```

### 3.5 数组极值

```cpp
int arr[] = {3, 7, 2, 9, 5};

// 最大值
int maxVal = arr[0];
for (int i = 1; i < 5; i++) {
    if (arr[i] > maxVal) {
        maxVal = arr[i];
    }
}

// 最小值
int minVal = arr[0];
for (int i = 1; i < 5; i++) {
    if (arr[i] < minVal) {
        minVal = arr[i];
    }
}
```

---

## 四、字符串操作类

### 4.1 获取字符串长度

```cpp
string s = "Hello";
s.length();  // 5
s.size();    // 5，同length()
```

### 4.2 substr - 子串截取

```cpp
string s = "HelloWorld";

// substr(pos)：从pos到末尾
s.substr(5);      // "World"

// substr(pos, len)：从pos开始截取len个字符
s.substr(0, 5);   // "Hello"
s.substr(3, 3);   // "loW"

// 越界处理：不会抛异常，返回到末尾
s.substr(10, 5);  // ""（空字符串）
```

### 4.3 replace - 字符串替换

```cpp
string s = "HelloWorld";

// replace(pos, len, str)
s.replace(5, 5, "C++");  // "HelloC++"（替换5个字符为"C++"）
s.replace(0, 5, "Hi");   // "HiWorld"
```

### 4.4 insert - 字符串插入

```cpp
string s = "HelloC++";
s.insert(5, "World");     // "HelloWorldC++"
```

### 4.5 find - 字符串查找

```cpp
string s = "Gesp Test";

// find：返回第一个匹配的位置，找不到返回npos
s.find("e");       // 2（第一个'e'）
s.find("e", 3);    // 6（从位置3开始找）
s.find("e", 10);   // string::npos

// rfind：返回最后一个匹配的位置
s.rfind("e");      // 6
```

### 4.6 字符串比较

```cpp
string s1 = "hello";
string s2 = "hello";

// == 比较内容（不是地址）
s1 == s2;          // true

// 与字面量比较
string("hello") == "hello";  // true
```

### 4.7 字符串转大写/小写

```cpp
#include <cctype>
string s = "Hello";

// 转小写
for (char& c : s) {
    c = tolower(c);
}

// 转大写
for (char& c : s) {
    c = toupper(c);
}
```

---

## 五、函数基础类

### 5.1 基本函数定义

```cpp
// 返回最大值
int max(int a, int b) {
    if (a > b) return a;
    return b;
}

// 返回最小值
int min(int a, int b) {
    return a < b ? a : b;
}
```

### 5.2 函数参数传递

```cpp
// 值传递
void func1(int x) {
    x = 100;  // 修改副本，不影响原值
}

// 引用传递
void func2(int& x) {
    x = 100;  // 修改原值
}

// 指针传递
void func3(int* x) {
    *x = 100;  // 修改原值
}
```

### 5.3 函数返回值

```cpp
// void：无返回值
void printHello() {
    cout << "Hello";
}

// 返回int
int getValue() {
    return 42;
}

// 返回double
double getPi() {
    return 3.14159;
}

// 返回bool
bool isEven(int n) {
    return n % 2 == 0;
}
```

---

## 六、数据类型类

### 6.1 sizeof常用类型

```cpp
sizeof(char);        // 1字节
sizeof(short);       // 2字节
sizeof(int);         // 4字节
sizeof(long);        // 4或8字节
sizeof(long long);   // 8字节
sizeof(float);       // 4字节
sizeof(double);      // 8字节
sizeof(bool);        // 1字节

// 数组总大小
int arr[10];
sizeof(arr);         // 40字节（10 × 4）
```

### 6.2 无符号类型

```cpp
unsigned int n;       // 0 ~ 4294967295（32位）
unsigned short s;    // 0 ~ 65535（16位）
unsigned long l;     // 0 ~ 4294967295（32位）
unsigned long long; // 0 ~ 1.8e19
```

### 6.3 类型转换

```cpp
// 整数转浮点数
int a = 5;
double b = a;        // 5.0

// 浮点数转整数（截断）
double c = 3.14;
int d = c;           // 3

// 字符转ASCII
char ch = 'A';
int ascii = ch;      // 65

// ASCII转字符
int ascii = 65;
char ch = ascii;     // 'A'
```

### 6.4 字符常量类型

```cpp
// 字符常量是int类型
sizeof('a');      // 4字节（32位系统）
sizeof(char);     // 1字节

// 字符是char类型
char c = 'a';
```

---

## 七、运算符运算类

### 7.1 自增自减

```cpp
// 前缀：先增后用
int a = 5;
int b = ++a;  // a=6, b=6

// 后缀：先用后增
int c = 5;
int d = c++;  // c=6, d=5
```

### 7.2 复合赋值

```cpp
int a = 5;
a += 3;   // a = a + 3 = 8
a -= 2;   // a = a - 2 = 6
a *= 2;   // a = a * 2 = 12
a /= 3;   // a = a / 3 = 4
a %= 3;   // a = a % 3 = 1
```

### 7.3 逻辑运算

```cpp
// 与（&&）
true && true;   // true
true && false;  // false

// 或（||）
true || false;  // true
false || false; // false

// 非（!）
!true;          // false
!false;         // true

// 短路求值
int a = 0;
if (a != 0 && 1 / a > 0) { }  // a=0时，不会执行1/a
```

### 7.4 比较运算

```cpp
// 等于、不等于
5 == 5;   // true
5 != 3;   // true

// 大小比较
5 < 10;   // true
5 > 3;    // true
5 <= 5;   // true
5 >= 3;   // true

// 比较链陷阱
int x = 5, y = 10, z = 15;
x < y < z;  // (5<10)=1, 1<15=1 → true（不是预期意思）
```

### 7.5 逗号运算符

```cpp
// 逗号表达式：取最后一个值
int a = (1, 2, 3);  // a = 3

// for循环中的逗号
for (int i = 0, j = 10; i < 5; i++, j--) {
    // 初始化两个变量，每次更新两个变量
}
```

---

## 八、综合应用类

### 8.1 判断回文数

```cpp
bool isPalindrome(int n) {
    int original = n, reversed = 0;
    while (n > 0) {
        reversed = reversed * 10 + n % 10;
        n /= 10;
    }
    return original == reversed;
}
```

### 8.2 数位求和

```cpp
int digitSum(int n) {
    int sum = 0;
    while (n > 0) {
        sum += n % 10;
        n /= 10;
    }
    return sum;
}
```

### 8.3 逆序数

```cpp
int reverseNumber(int n) {
    int reversed = 0;
    while (n > 0) {
        reversed = reversed * 10 + n % 10;
        n /= 10;
    }
    return reversed;
}
// 12345 → 54321
```

### 8.4 判断质数

```cpp
bool isPrime(int n) {
    if (n <= 1) return false;
    if (n == 2) return true;
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) return false;
    }
    return true;
}
```

### 8.5 最大公约数（辗转相除法）

```cpp
int gcd(int a, int b) {
    while (b != 0) {
        int r = a % b;
        a = b;
        b = r;
    }
    return a;
}
```

### 8.6 阶乘计算

```cpp
int factorial(int n) {
    int result = 1;
    for (int i = 1; i <= n; i++) {
        result *= i;
    }
    return result;
}

// 阶乘和
int factorialSum(int n) {
    int sum = 0, fact = 1;
    for (int i = 1; i <= n; i++) {
        fact *= i;
        sum += fact;
    }
    return sum;
}
```

---

## 快速参考表

### 进制转换速查

| 转换 | 方法 | 示例 |
|------|------|------|
| 十→二 | 除2取余 | 10 → 1010 |
| 十→八 | cout << oct | 10 → 12 |
| 十→十六 | cout << hex | 255 → ff |
| 二→十 | 位权展开 | 1101 → 13 |

### 位运算速查

| 运算 | 符号 | 示例 |
|------|------|------|
| 与 | & | 5 & 3 = 1 |
| 或 | \| | 5 \| 3 = 7 |
| 异或 | ^ | 5 ^ 3 = 6 |
| 左移 | << | 5 << 1 = 10 |
| 右移 | >> | 5 >> 1 = 2 |
| 取反 | ~ | ~5 = -6 |

### 字符串操作速查

| 操作 | 方法 | 示例 |
|------|------|------|
| 长度 | s.length() | "Hello" → 5 |
| 子串 | s.substr(pos, len) | "Hello".substr(1,3) → "ell" |
| 替换 | s.replace(pos, len, str) | 替换 |
| 查找 | s.find(str) / s.rfind(str) | 找子串 |
| 比较 | s1 == s2 | 比较内容 |

---

> **手册版本**：v1.0
> **更新日期**：2026年2月
> **数据来源**：GESP C++三级2023.6-2025.12共11套真题
