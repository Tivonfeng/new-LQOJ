# C++二级高频代码片段库

> 基于2023.6-2025.12共11套真题（275题）代码模式总结
> 
> **适用对象**：GESP C++二级考生
> **目标**：掌握核心代码模式，快速读懂题目

---

## 目录

1. [基础运算类](#一基础运算类)
2. [数位操作类](#二数位操作类)
3. [循环控制类](#三循环控制类)
4. [条件判断类](#四条件判断类)
5. [算法实现类](#五算法实现类)
6. [图形输出类](#六图形输出类)
7. [输入输出类](#七输入输出类)
8. [综合应用类](#八综合应用类)

---

## 一、基础运算类

### 1.1 四则运算

```cpp
// 加减乘除
int sum = a + b;
int diff = a - b;
int prod = a * b;
int quot = a / b;      // 整数除法截断
int mod = a % b;       // 取模

// 复合赋值
a += b;  // a = a + b
a -= b;  // a = a - b
a *= b;  // a = a * b
a /= b;  // a = a / b
a %= b;  // a = a % b
```

### 1.2 自增自减

```cpp
// 前缀：先增后用
int a = 5;
int b = ++a;  // a=6, b=6

// 后缀：先用后增
int c = 5;
int d = c++;  // c=6, d=5
```

### 1.3 比较运算

```cpp
// 比较
a == b;  // 等于
a != b;  // 不等于
a < b;   // 小于
a > b;   // 大于
a <= b;  // 小于等于
a >= b;  // 大于等于

// 逻辑
a && b;  // 与
a || b;  // 或
!a;      // 非
```

### 1.4 位运算（了解即可）

```cpp
// 位运算
a << 1;  // 左移1位（乘2）
a >> 1;  // 右移1位（除2，取整）
a & b;   // 按位与
a | b;   // 按位或
a ^ b;   // 按位异或
~a;      // 按位取反
```

---

## 二、数位操作类

### 2.1 获取个位

```cpp
int N = 12345;
int digit = N % 10;  // 5
```

### 2.2 去掉个位

```cpp
int N = 12345;
N = N / 10;  // 1234
```

### 2.3 获取十位

```cpp
int N = 12345;
int digit = N / 10 % 10;  // 4
```

### 2.4 获取百位

```cpp
int N = 12345;
int digit = N / 100 % 10;  // 3
```

### 2.5 获取第M位数（从右往左，从1开始）

```cpp
// 方法1：循环计算除数
int getDigit(int N, int M) {
    int div = 1;
    for (int i = 1; i < M; i++)
        div *= 10;
    return N / div % 10;
}

// 方法2：指数计算
#include <cmath>
int div = pow(10, M - 1);
int digit = N / div % 10;
```

### 2.6 数位求和

```cpp
int sum = 0;
while (N > 0) {
    sum += N % 10;
    N /= 10;
}
// sum = 1+2+3+4+5 = 15
```

### 2.7 逆序数

```cpp
int rev = 0;
while (N > 0) {
    rev = rev * 10 + N % 10;
    N /= 10;
}
// 12345 → 54321
```

### 2.8 判断回文数

```cpp
int original = N, reversed = 0;
while (N > 0) {
    reversed = reversed * 10 + N % 10;
    N /= 10;
}
if (original == reversed)
    cout << "回文数";
else
    cout << "不是回文数";
```

### 2.9 判断几位数

```cpp
int count = 0;
int temp = N;
while (temp > 0) {
    count++;
    temp /= 10;
}
// 或
int count = log10(N) + 1;  // N > 0
```

---

## 三、循环控制类

### 3.1 for循环基本结构

```cpp
// 标准for循环
for (int i = 0; i < n; i++) {
    // 循环体
}

// 倒序
for (int i = n; i > 0; i--) {
    // 循环体
}

// 步长
for (int i = 0; i < n; i += 2) {
    // 步长为2
}
```

### 3.2 while循环

```cpp
// 条件循环
while (condition) {
    // 循环体
}

// 至少执行一次
do {
    // 循环体
} while (condition);
```

### 3.3 break与continue

```cpp
for (int i = 0; i < 10; i++) {
    if (condition) {
        break;      // 跳出整个循环
    }
    // 不会执行
}

for (int i = 0; i < 10; i++) {
    if (condition) {
        continue;   // 跳到下一次
    }
    // 不满足条件时不执行
}
```

### 3.4 嵌套循环

```cpp
// 双重循环
for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
        // 循环体
    }
}
// 总次数 = n × m
```

---

## 四、条件判断类

### 4.1 if-else

```cpp
if (condition) {
    // 成立时执行
} else {
    // 不成立时执行
}

// 多条件
if (condition1) {
    // 1成立
} else if (condition2) {
    // 2成立
} else {
    // 都不成立
}
```

### 4.2 switch-case

```cpp
switch (expression) {
    case value1:
        // 执行
        break;
    case value2:
        // 执行
        break;
    default:
        // 都不匹配时执行
}
```

### 4.3 三目运算符

```cpp
// condition ? value1 : value2
int max = (a > b) ? a : b;
```

### 4.4 逻辑条件组合

```cpp
// 与
if (a > 0 && b > 0) { }

// 或
if (a > 0 || b > 0) { }

// 非
if (!(a > 0)) { }

// 复杂条件
if ((a > 0 && b < 10) || c == 5) { }
```

---

## 五、算法实现类

### 5.1 质数判断

```cpp
// 方法1：基础版
bool isPrime(int n) {
    if (n <= 1) return false;
    if (n == 2) return true;
    for (int i = 2; i < n; i++)
        if (n % i == 0) return false;
    return true;
}

// 方法2：优化版（只需检查到sqrt(n)）
bool isPrime(int n) {
    if (n <= 1) return false;
    if (n == 2) return true;
    for (int i = 2; i * i <= n; i++)
        if (n % i == 0) return false;
    return true;
}
```

### 5.2 最大公约数（辗转相除法）

```cpp
int gcd(int a, int b) {
    while (b != 0) {
        int r = a % b;
        a = b;
        b = r;
    }
    return a;
}
```

### 5.3 最小公倍数

```cpp
int lcm(int a, int b) {
    return a / gcd(a, b) * b;
}
```

### 5.4 阶乘

```cpp
int factorial(int n) {
    int result = 1;
    for (int i = 1; i <= n; i++)
        result *= i;
    return result;
}
```

### 5.5 阶乘和

```cpp
int factorialSum(int n) {
    int sum = 0, fact = 1;
    for (int i = 1; i <= n; i++) {
        fact *= i;
        sum += fact;
    }
    return sum;
}
```

### 5.6 斐波那契数列

```cpp
// 方法1：交换技巧
void printFib(int n) {
    int a = 0, b = 1;
    for (int i = 1; i <= n; i++) {
        cout << a << " ";
        b = a + b;
        a = b - a;
    }
}

// 方法2：临时变量
void printFib(int n) {
    int a = 0, b = 1;
    for (int i = 1; i <= n; i++) {
        cout << a << " ";
        int tmp = a + b;
        a = b;
        b = tmp;
    }
}

// 方法3：递归（效率低，仅供理解）
int fib(int n) {
    if (n == 1) return 0;
    if (n == 2) return 1;
    return fib(n - 1) + fib(n - 2);
}
```

### 5.7 孪生素数

```cpp
for (int n = 3; n < 100; n += 2) {
    if (isPrime(n) && isPrime(n + 2))
        cout << n << " " << n + 2 << endl;
}
```

### 5.8 自守数

```cpp
bool isSelfGuard(int n) {
    int n1 = n, m1 = n * n;
    while (n1 > 0) {
        if (n1 % 10 != m1 % 10)
            return false;
        n1 /= 10;
        m1 /= 10;
    }
    return true;
}
```

---

## 六、图形输出类

### 6.1 左对齐直角三角形

```cpp
// *
// **
// ***
// ****
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= i; j++)
        cout << "*";
    cout << endl;
}
```

### 6.2 右对齐直角三角形

```cpp
//    *
//   **
//  ***
// ****
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= n - i; j++)
        cout << " ";
    for (int j = 1; j <= i; j++)
        cout << "*";
    cout << endl;
}
```

### 6.3 金字塔

```cpp
//    *
//   ***
//  *****
// *******
for (int i = 0; i < n; i++) {
    for (int j = 0; j < n - i - 1; j++)
        cout << " ";
    for (int j = 0; j < 2 * i + 1; j++)
        cout << "*";
    cout << endl;
}
```

### 6.4 菱形

```cpp
//    *
//   ***
//  *****
//   ***
//    *
int n;  // 上半部分行数
cin >> n;

// 上半部分
for (int i = 0; i < n; i++) {
    for (int j = 0; j < n - i - 1; j++)
        cout << " ";
    for (int j = 0; j < 2 * i + 1; j++)
        cout << "*";
    cout << endl;
}

// 下半部分
for (int i = n - 2; i >= 0; i--) {
    for (int j = 0; j < n - i - 1; j++)
        cout << " ";
    for (int j = 0; j < 2 * i + 1; j++)
        cout << "*";
    cout << endl;
}
```

### 6.5 数字三角形

```cpp
// 1
// 12
// 123
// 1234
for (int i = 1; i <= n; i++) {
    for (int j = 1; j <= i; j++)
        cout << j;
    cout << endl;
}
```

### 6.6 99乘法表

```cpp
for (int i = 1; i <= 9; i++) {
    for (int j = 1; j <= i; j++)
        cout << j << "*" << i << "=" << i * j << " ";
    cout << endl;
}
```

---

## 七、输入输出类

### 7.1 基本输入输出

```cpp
// 输入
int a;
cin >> a;

// 输出
cout << a;

// 换行
cout << endl;
cout << "\n";

// 格式输出
printf("%d", a);       // 整数
printf("%f", a);       // 浮点
printf("%c", a);       // 字符
printf("%s", str);     // 字符串
printf("%g", a);       // 自动格式
```

### 7.2 多变量输入

```cpp
int a, b, c;
cin >> a >> b >> c;

float x, y, z;
cin >> x >> y >> z;
```

### 7.3 循环输入

```cpp
// 输入n个数
int n, x;
cin >> n;
for (int i = 0; i < n; i++) {
    cin >> x;
    // 处理x
}

//  sentinel值结束
int x;
while (cin >> x) {
    if (x == -1) break;
    // 处理x
}
```

### 7.4 字符输入

```cpp
char ch;
cin >> ch;  // 跳过空白字符

char ch = getchar();  // 读取任意字符
```

---

## 八、综合应用类

### 8.1 统计个数

```cpp
int count = 0;
for (int i = 0; i < n; i++) {
    if (condition)
        count++;
}
// count即为满足条件的个数
```

### 8.2 求最大值

```cpp
int maxVal = arr[0];
for (int i = 1; i < n; i++) {
    if (arr[i] > maxVal)
        maxVal = arr[i];
}
```

### 8.3 求最小值

```cpp
int minVal = arr[0];
for (int i = 1; i < n; i++) {
    if (arr[i] < minVal)
        minVal = arr[i];
}
```

### 8.4 求和

```cpp
int sum = 0;
for (int i = 0; i < n; i++)
    sum += arr[i];
```

### 8.5 平均值

```cpp
int sum = 0;
for (int i = 0; i < n; i++)
    sum += arr[i];
float avg = (float)sum / n;
```

### 8.6 冒泡排序

```cpp
for (int i = 0; i < n - 1; i++) {
    for (int j = 0; j < n - 1 - i; j++) {
        if (arr[j] > arr[j + 1]) {
            int tmp = arr[j];
            arr[j] = arr[j + 1];
            arr[j + 1] = tmp;
        }
    }
}
```

### 8.7 二分查找（了解）

```cpp
int binarySearch(int arr[], int n, int target) {
    int left = 0, right = n - 1;
    while (left <= right) {
        int mid = (left + right) / 2;
        if (arr[mid] == target)
            return mid;
        else if (arr[mid] < target)
            left = mid + 1;
        else
            right = mid - 1;
    }
    return -1;  // 未找到
}
```

### 8.8 鸡兔同笼（典型应用）

```cpp
int head, foot;
cin >> head >> foot;
// 鸡有2只脚，兔有4只脚
int rabbit = (foot - 2 * head) / 2;
int chicken = head - rabbit;
```

### 8.9 闰年判断

```cpp
bool isLeapYear(int year) {
    return (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);
}
```

### 8.10 星期计算

```cpp
// 已知今天星期几，求N天后星期几
int today;  // 0=周日, 1=周一, ..., 6=周六
int N;
cin >> today >> N;
int future = (today + N) % 7;
```

---

## 代码片段速查表

| 功能 | 核心代码 | 关键点 |
|------|---------|--------|
| 个位 | `N % 10` | 取模10 |
| 去个位 | `N / 10` | 整除10 |
| 第M位 | `N / div % 10` | div=10^(M-1) |
| 数位和 | `while(N){sum+=N%10;N/=10;}` | 循环累加 |
| 逆序 | `rev=rev*10+N%10` | 乘10累加 |
| 质数判断 | `for(i=2;i*i<=n;i++)` | 到sqrt(n) |
| 最大公约数 | `while(b){r=a%b;a=b;b=r;}` | 辗转相除 |
| 斐波那契 | `b=a+b;a=b-a;` | 交换技巧 |
| 阶乘和 | `fact*=i; sum+=fact;` | 递推计算 |
| 图形输出 | 双重循环+j/i控制 | 行列控制 |

---

## 常见错误对照表

| 错误写法 | 正确写法 | 说明 |
|---------|---------|------|
| `N % 10^(M-1) % 10` | `N / div % 10` | 先除后模 |
| `sum += N % 10` | `sum += N % 10; N /= 10` | 别忘去位 |
| `a = b + c` | `a = b + c` | 注意括号 |
| `while(N)` | `while(N > 0)` | N=0时退出 |
| `for(i=0;i<=n;i++)` | `for(i=0;i<n;i++)` | 边界条件 |

---

> **手册版本**：v1.0
> **更新日期**：2026年2月
> **数据来源**：GESP C++二级2023.6-2025.12共11套真题
