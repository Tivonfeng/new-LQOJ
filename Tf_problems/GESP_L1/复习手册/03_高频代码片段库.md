# C++一级高频代码片段库

> 基于600道真题深度分析，提取高频代码模式
>
> **适用对象**：GESP C++一级考生
> **目标**：快速掌握高频代码模式

---

## 目录

1. [基础语法类](#一基础语法类)
2. [分支结构类](#二分支结构类)
3. [循环结构类](#三循环结构类)
4. [数字操作类](#四数字操作类)
5. [输入输出类](#五输入输出类)
6. [综合应用类](#六综合应用类)

---

## 一、基础语法类

### 1.1 变量定义与赋值

```cpp
// 基本类型
int age = 18;
double score = 95.5;
char grade = 'A';
bool passed = true;

// 多个变量
int a, b, c;
int x = 1, y = 2, z = 3;

// 链式赋值
int m, n, p;
m = n = p = 100;
```

### 1.2 算术运算

```cpp
int a = 10, b = 3;

// 基本运算
int sum = a + b;      // 加：13
int diff = a - b;     // 减：7
int prod = a * b;     // 乘：30
int quot = a / b;     // 除：3（整除）
int rem = a % b;      // 余：1

// 复合赋值
a += b;   // a = a + b
a -= b;   // a = a - b
a *= b;   // a = a * b
a /= b;   // a = a / b
a %= b;   // a = a % b

// 自增自减
a++;   // 先用后增
++a;   // 先增后用
a--;   // 先用后减
--a;   // 先减后用
```

### 1.3 关系与逻辑运算

```cpp
int x = 5, y = 10;

// 关系运算
bool eq = (x == y);   // false
bool ne = (x != y);   // true
bool gt = (x > y);    // false
bool lt = (x < y);    // true
bool ge = (x >= y);   // false
bool le = (x <= y);   // true

// 逻辑运算
bool and_result = (x > 0 && y > 0);   // true（都成立）
bool or_result = (x > 0 || y > 0);    // true（至少一个成立）
bool not_result = !(x > 0);           // false（取反）

// 逻辑非
bool is_zero = !x;   // x为0时为true
```

### 1.4 类型转换

```cpp
double pi = 3.14159;

// 强制类型转换
int n1 = (int)pi;    // 3
int n2 = int(pi);     // 3

// 隐式转换
double d = n1;       // int → double：3.0
int result = 5 / 2;  // 2（整除）

// 提高精度
double accurate = 5.0 / 2;  // 2.5
```

---

## 二、分支结构类

### 2.1 if单分支

```cpp
int score = 85;

if (score >= 60) {
    cout << "及格";
}
```

### 2.2 if-else双分支

```cpp
int n;
cin >> n;

if (n % 2 == 0) {
    cout << "偶数";
} else {
    cout << "奇数";
}
```

### 2.3 多分支结构

```cpp
int score;
cin >> score;

if (score >= 90) {
    cout << "优秀";
} else if (score >= 80) {
    cout << "良好";
} else if (score >= 70) {
    cout << "中等";
} else if (score >= 60) {
    cout << "及格";
} else {
    cout << "不及格";
}
```

### 2.4 switch语句

```cpp
int day;
cin >> day;

switch (day) {
    case 1:
        cout << "星期一";
        break;
    case 2:
        cout << "星期二";
        break;
    case 3:
        cout << "星期三";
        break;
    default:
        cout << "输入错误";
        break;
}
```

### 2.5 条件表达式

```cpp
int a = 5, b = 3;

// 三目运算符
int max = (a > b) ? a : b;   // 5
int min = (a < b) ? a : b;   // 3

// 输出
cout << (a > b ? "a大" : "b大");
```

---

## 三、循环结构类

### 3.1 for循环

```cpp
// 基本for循环
for (int i = 0; i < 10; i++) {
    cout << i;    // 输出0-9
}

// 步长循环
for (int i = 0; i < 10; i += 2) {
    cout << i;    // 输出0,2,4,6,8
}

// 倒序循环
for (int i = 10; i > 0; i--) {
    cout << i;    // 输出10,9,...,1
}
```

### 3.2 while循环

```cpp
// 基本while循环
int i = 0;
while (i < 10) {
    cout << i;
    i++;
}

// 计数器循环
int cnt = 0;
int sum = 0;
while (cnt < 100) {
    sum += cnt;
    cnt++;
}
```

### 3.3 do-while循环

```cpp
int n = 0;
do {
    cout << n;
    n++;
} while (n < 5);   // 输出0,1,2,3,4

// 注意：至少执行一次
int x = 10;
do {
    cout << x;   // 一定会输出10
} while (x < 10);
```

### 3.4 break语句

```cpp
// break：跳出整个循环
for (int i = 0; i < 100; i++) {
    if (i == 10) {
        break;   // i=10时跳出循环
    }
    cout << i;   // 输出0-9
}

// 查找第一个符合条件的数
int target = 7;
for (int i = 1; i <= 100; i++) {
    if (i == target) {
        cout << "找到：" << i;
        break;
    }
}
```

### 3.5 continue语句

```cpp
// continue：跳过本次循环
for (int i = 1; i <= 10; i++) {
    if (i % 2 == 0) {
        continue;   // 跳过偶数
    }
    cout << i;     // 输出1,3,5,7,9
}

// 只输出奇数
for (int i = 1; i <= 20; i++) {
    if (i % 2 == 1) {
        cout << i << " ";
    }
}
```

### 3.6 嵌套循环

```cpp
// 九九乘法表
for (int i = 1; i <= 9; i++) {
    for (int j = 1; j <= i; j++) {
        cout << j << "*" << i << "=" << j*i << " ";
    }
    cout << endl;
}

// 输出矩形
for (int i = 0; i < 5; i++) {
    for (int j = 0; j < 10; j++) {
        cout << "*";
    }
    cout << endl;
}
```

---

## 四、数字操作类

### 4.1 获取各位数字

```cpp
int n = 1234;

// 获取各位数字
int g = n % 10;       // 个位：4
int s = n / 10 % 10;  // 十位：3
int b = n / 100 % 10; // 百位：2
int q = n / 1000;     // 千位：1

// 循环获取
int temp = n;
while (temp > 0) {
    int digit = temp % 10;
    cout << digit << " ";  // 从个位开始输出
    temp /= 10;
}
```

### 4.2 数字逆序

```cpp
int n = 1234;
int rev = 0;

while (n > 0) {
    rev = rev * 10 + n % 10;
    n /= 10;
}
// rev = 4321
```

### 4.3 数字各位平方和

```cpp
int n = 1234;
int sum = 0;

while (n > 0) {
    int d = n % 10;
    sum += d * d;
    n /= 10;
}
// sum = 1+4+9+16 = 30
```

### 4.4 质数判断

```cpp
// 方法1：统计因数个数
int N;
cin >> N;
int cnt = 0;
for (int i = 1; i <= N; i++) {
    if (N % i == 0) {
        cnt++;
    }
}
if (cnt == 2) {
    cout << N << "是质数";
}

// 方法2：标记法
int N;
cin >> N;
bool isPrime = true;
for (int i = 2; i < N; i++) {
    if (N % i == 0) {
        isPrime = false;
        break;
    }
}
cout << (isPrime ? "是质数" : "不是质数");
```

### 4.5 阶乘计算

```cpp
int n;
cin >> n;
int result = 1;

for (int i = 1; i <= n; i++) {
    result *= i;
}
cout << result;
```

### 4.6 累加计算

```cpp
// 1+2+...+100
int sum = 0;
for (int i = 1; i <= 100; i++) {
    sum += i;
}

// 条件累加（1-100之间3或5的倍数）
int sum = 0;
for (int i = 1; i <= 100; i++) {
    if (i % 3 == 0 || i % 5 == 0) {
        sum += i;
    }
}
```

### 4.7 求最大公约数

```cpp
int a, b;
cin >> a >> b;

while (b != 0) {
    int r = a % b;
    a = b;
    b = r;
}
cout << "最大公约数：" << a;
```

---

## 五、输入输出类

### 5.1 cin基本输入

```cpp
// 整数输入
int n;
cin >> n;

// 多个输入
int a, b, c;
cin >> a >> b >> c;

// 浮点数
double d;
cin >> d;

// 字符
char ch;
cin >> ch;

// 字符串
string str;
cin >> str;
```

### 5.2 cout基本输出

```cpp
int a = 10;

// 基本输出
cout << a;

// 组合输出
cout << "a=" << a;

// 换行输出
cout << "Hello" << endl;
cout << "World" << "\n";
```

### 5.3 printf格式化输出

```cpp
int n = 123;

// 整数输出
printf("%d\n", n);           // 123
printf("%5d\n", n);          // "  123"（宽度5）
printf("%05d\n", n);         // "00123"（前导0）

// 浮点数输出
double pi = 3.14159;
printf("%.2f\n", pi);        // 3.14
printf("%6.2f\n", pi);       // "  3.14"

// 组合输出
printf("a=%d, b=%d\n", 10, 20);

// 特殊字符
printf("%%d 显示百分号\n");   // %d 显示百分号
```

### 5.4 scanf格式化输入

```cpp
int n;

// 整数输入
scanf("%d", &n);

// 浮点数输入
double d;
scanf("%lf", &d);

// 字符输入
char ch;
scanf("%c", &ch);

// 组合输入
int a, b;
scanf("%d%d", &a, &b);
```

---

## 六、综合应用类

### 6.1 水仙花数

```cpp
// 三位数各位立方和等于本身的数
for (int i = 100; i <= 999; i++) {
    int a = i / 100;       // 百位
    int b = i / 10 % 10;   // 十位
    int c = i % 10;        // 个位
    if (a*a*a + b*b*b + c*c*c == i) {
        cout << i << " ";
    }
}
// 输出：153 370 371 407
```

### 6.2 完全平方数判断

```cpp
int N;
cin >> N;

for (int i = 0; i <= N; i++) {
    if (i * i == N) {
        cout << N << "是完全平方数";
        break;
    }
}
```

### 6.3 因数输出

```cpp
int n;
cin >> n;

for (int i = 1; i <= n; i++) {
    if (n % i == 0) {
        cout << i << " ";
    }
}
// 输入12，输出：1 2 3 4 6 12
```

### 6.4 冒泡排序

```cpp
int arr[] = {64, 34, 25, 12, 22, 11, 90};
int n = 7;

for (int i = 0; i < n - 1; i++) {
    for (int j = 0; j < n - 1 - i; j++) {
        if (arr[j] > arr[j + 1]) {
            int temp = arr[j];
            arr[j] = arr[j + 1];
            arr[j + 1] = temp;
        }
    }
}
```

### 6.5 斐波那契数列

```cpp
int n;
cin >> n;

int a = 0, b = 1;
for (int i = 1; i <= n; i++) {
    cout << a << " ";
    int c = a + b;
    a = b;
    b = c;
}
// 输出：0 1 1 2 3 5 8 13...
```

### 6.6 求第N位数字

```cpp
int N, M;
cin >> N >> M;

// 求N的第M位数字（从右往左，个位为第1位）
int div = 1;
for (int i = 1; i < M; i++) {
    div *= 10;
}
int digit = (N / div) % 10;
cout << digit;
```

### 6.7 迭代法求最大数减最小数

```cpp
int a, b;
cin >> a >> b;

while (a != b) {
    if (a > b) {
        a = a - b;
    } else {
        b = b - a;
    }
}
cout << "结果：" << a;
```

### 6.8 找满足条件的数

```cpp
// 找1-100之间能被3整除且除以7余数为2的数
for (int i = 0; i < 100; i++) {
    if (i % 3 == 0 && i % 7 == 2) {
        cout << i << " ";
    }
}
// 输出：2 23 44 65 86
```

---

## 附录：常见错误对照表

| 错误写法 | 正确写法 | 说明 |
|----------|----------|------|
| `if (a = 5)` | `if (a == 5)` | 赋值与等于 |
| `int 1st = 1` | `int first = 1` | 不能数字开头 |
| `char c = "a"` | `char c = 'a'` | 单引号 |
| `scanf("%d", n)` | `scanf("%d", &n)` | 需要取地址符 |
| `a / b` 整除 | `a / b == 3.3` | 整数除法 |
| `if (1 < 2 < 3)` | `if (1 < 2 && 2 < 3)` | 无链式比较 |
| `cout << "%%d"` | `printf("%%d")` | cout无格式化 |
| `while (1)` | `while (true)` | 可读性 |

---

> **使用建议**：
> 1. 每天背诵常用代码片段
> 2. 动手敲代码加深记忆
> 3. 理解代码逻辑而非死记硬背
> 4. 多练习真题检验掌握程度
