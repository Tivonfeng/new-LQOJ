/**
 * èµ›è€ƒå¤§å… TypeScript ç±»å‹å®šä¹‰
 *
 * æ–‡ä»¶è¯´æ˜ï¼š
 * - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å‰ç«¯æ•°æ®æ¥å£å®šä¹‰
 * - ç¡®ä¿ç»„ä»¶ä¹‹é—´çš„æ•°æ®æ ¼å¼ä¸€è‡´æ€§
 * - æé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œç±»å‹å®‰å…¨æ€§
 *
 * ä½¿ç”¨æ–¹å¼ï¼š
 * import { ExamHallData, DomainStats } from './types';
 */

// ============================================================================
// ğŸ“Š åŸŸçº§ç»Ÿè®¡æ•°æ®æ¥å£
// ============================================================================

/**
 * å…¨åŸŸè¯ä¹¦ç»Ÿè®¡æ•°æ®
 * åŒ…å«è¯ä¹¦ã€ç”¨æˆ·ã€åˆ†ç±»ç­‰å…¨åŸŸç»Ÿè®¡æŒ‡æ ‡
 */
export interface DomainStats {
  /** è¯ä¹¦æ€»æ•° */
  totalCertificates: number;
  /** æ‹¥æœ‰è¯ä¹¦çš„ç”¨æˆ·æ€»æ•° */
  totalUsers: number;
  /** äººå‡è¯ä¹¦æ•° */
  averageCertificatesPerUser: number;
  /** è¯ä¹¦åˆ†ç±»æ•° */
  categoryCount: number;
}

// ============================================================================
// ğŸ‘¤ ç”¨æˆ·çº§æ•°æ®æ¥å£
// ============================================================================

/**
 * ç”¨æˆ·ä¸ªäººç»Ÿè®¡æ•°æ®
 * åŒ…å«å½“å‰ç”¨æˆ·çš„è¯ä¹¦ã€æ’åã€åˆ†ç±»ç­‰ä¿¡æ¯
 */
export interface UserStats {
  /** ç”¨æˆ·ID */
  uid: number;
  /** åŸŸID */
  domainId: string;
  /** ç”¨æˆ·è¯ä¹¦æ€»æ•° */
  totalCertificates: number;
  /** ç”¨æˆ·çš„é¡¶éƒ¨è¯ä¹¦åˆ†ç±»ï¼ˆæŒ‰æ•°é‡æ’åºï¼Œæœ€å¤š3ä¸ªï¼‰ */
  topCategories: string[];
  /** æœ€åä¸€ä¸ªè¯ä¹¦çš„è·å–æ—¶é—´ï¼ˆå¯é€‰ï¼‰ */
  lastCertificateDate?: Date;
}

/**
 * ç”¨æˆ·æ’åä¿¡æ¯
 * åŒ…å«ç”¨æˆ·åœ¨æ’è¡Œæ¦œä¸­çš„ä½ç½®
 */
export interface UserRank {
  /** ç”¨æˆ·ID */
  uid: number;
  /** ç”¨æˆ·å½“å‰æ’å */
  rank: number;
  /** æ€»å‚ä¸äººæ•° */
  total: number;
  /** åˆ†ç±»ï¼ˆå¯é€‰ï¼‰ */
  category?: string;
}

// ============================================================================
// ğŸ† æ’è¡Œæ¦œæ•°æ®æ¥å£
// ============================================================================

/**
 * æ’è¡Œæ¦œæ¡ç›®
 * åŒ…å«æ’è¡Œæ¦œä¸­å•ä¸ªç”¨æˆ·çš„æ•°æ®
 */
export interface LeaderboardEntry {
  /** ç”¨æˆ·ID */
  uid: number;
  /** åœ¨æ’è¡Œæ¦œä¸­çš„æ’å */
  rank: number;
  /** è¯ä¹¦æ•°é‡ */
  certificateCount: number;
  /** è¯¥ç”¨æˆ·çš„é¡¶éƒ¨åˆ†ç±» */
  topCategories: string[];
}

// ============================================================================
// ğŸ“ åˆ†ç±»æ•°æ®æ¥å£
// ============================================================================

/**
 * çƒ­é—¨è¯ä¹¦åˆ†ç±»
 * åŒ…å«åˆ†ç±»åç§°å’Œè¯ä¹¦æ•°é‡
 */
export interface PopularCategory {
  /** åˆ†ç±»åç§° */
  category: string;
  /** è¯¥åˆ†ç±»çš„è¯ä¹¦æ€»æ•° */
  count: number;
}

// ============================================================================
// ğŸ“ˆ è¶‹åŠ¿æ•°æ®æ¥å£
// ============================================================================

/**
 * å¢é•¿è¶‹åŠ¿æ•°æ®ç‚¹
 * ç”¨äºæ—¶é—´åºåˆ—åˆ†æå’Œå¯è§†åŒ–
 */
export interface GrowthTrendPoint {
  /** æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰ */
  date: string;
  /** è¯¥æ—¥æœŸçš„è¯ä¹¦æ–°å¢æ•° */
  count: number;
}

/**
 * æ–°ç”¨æˆ·ç»Ÿè®¡æ•°æ®
 * åŒ…å«æ–°ç”¨æˆ·æ€»æ•°å’Œæ—¥æœŸè¶‹åŠ¿
 */
export interface NewUsersStats {
  /** æœ€è¿‘Nå¤©æ–°å¢ç”¨æˆ·æ€»æ•° */
  count: number;
  /** æŒ‰æ—¥æœŸçš„æ–°ç”¨æˆ·å¢é•¿è¶‹åŠ¿ */
  trend: GrowthTrendPoint[];
}

// ============================================================================
// ğŸ“Š å›¾è¡¨æ•°æ®æ¥å£
// ============================================================================

/**
 * Chart.js æ•°æ®é›†å®šä¹‰
 * åŒ…å«å›¾è¡¨æ˜¾ç¤ºæ‰€éœ€çš„æ ‡ç­¾å’Œæ•°æ®
 */
export interface ChartDataset {
  /** æ•°æ®é›†æ ‡ç­¾ */
  label: string;
  /** æ•°æ®æ•°ç»„ */
  data: number[];
  /** è¾¹æ¡†é¢œè‰²ï¼ˆå¯é€‰ï¼‰ */
  borderColor?: string;
  /** èƒŒæ™¯é¢œè‰²ï¼ˆå¯é€‰ï¼‰ */
  backgroundColor?: string;
  /** æ˜¯å¦å¡«å……èƒŒæ™¯ï¼ˆå¯é€‰ï¼‰ */
  fill?: boolean;
  /** çº¿æ¡å¼ åŠ›ï¼ˆå¯é€‰ï¼‰ */
  tension?: number;
}

/**
 * å¢é•¿è¶‹åŠ¿å›¾è¡¨æ•°æ®
 * ç”¨äºæ¸²æŸ“å¢é•¿è¶‹åŠ¿å’Œæ–°ç”¨æˆ·ç»Ÿè®¡å›¾è¡¨
 */
export interface GrowthChartData {
  /** å›¾è¡¨ X è½´æ ‡ç­¾ï¼ˆæ—¥æœŸæ•°ç»„ï¼‰ */
  labels: string[];
  /** æ•°æ®é›†æ•°ç»„ */
  datasets: ChartDataset[];
}

/**
 * Chart.js å›¾è¡¨é…ç½®é€‰é¡¹
 * é…ç½®å›¾è¡¨çš„å“åº”å¼ã€å›¾ä¾‹ã€åæ ‡è½´ç­‰
 */
export interface ChartOptions {
  /** æ˜¯å¦å“åº”å¼ */
  responsive: boolean;
  /** æ˜¯å¦ä¿æŒå®½é«˜æ¯” */
  maintainAspectRatio: boolean;
  /** æ’ä»¶é…ç½® */
  plugins?: Record<string, any>;
  /** åæ ‡è½´é…ç½® */
  scales?: Record<string, any>;
}

// ============================================================================
// ğŸ¯ ä¸»æ•°æ®æ¥å£
// ============================================================================

/**
 * èµ›è€ƒå¤§å…å®Œæ•´æ•°æ®æ¨¡å‹
 * åŒ…å«å±•ç¤ºèµ›è€ƒå¤§å…æ‰€éœ€çš„æ‰€æœ‰æ•°æ®
 *
 * ä½¿ç”¨åœºæ™¯ï¼š
 * - ä»åç«¯æ¥æ”¶æ•°æ®
 * - ä¼ é€’ç»™ React ç»„ä»¶
 * - ä½œä¸ºå…¨å±€çŠ¶æ€ç®¡ç†çš„åŸºç¡€
 */
export interface ExamHallData {
  /** å…¨åŸŸç»Ÿè®¡æ•°æ® */
  domainStats: DomainStats;
  /** å½“å‰ç”¨æˆ·çš„ä¸ªäººç»Ÿè®¡ï¼ˆå¦‚æœæœªç™»å½•åˆ™ä¸º nullï¼‰ */
  userStats: UserStats | null;
  /** å½“å‰ç”¨æˆ·çš„æ’åä¿¡æ¯ï¼ˆå¦‚æœæœªç™»å½•æˆ–æ— æ’ååˆ™ä¸º nullï¼‰ */
  userRank: UserRank | null;
  /** æ’è¡Œæ¦œæ•°æ®ï¼ˆé€šå¸¸ä¸º Top 10ï¼‰ */
  leaderboard: LeaderboardEntry[];
  /** çƒ­é—¨åˆ†ç±»åˆ—è¡¨ï¼ˆé€šå¸¸ä¸º Top 5ï¼‰ */
  popularCategories: PopularCategory[];
  /** å¢é•¿è¶‹åŠ¿æ•°æ®ï¼ˆé€šå¸¸ä¸ºæœ€è¿‘ 30 å¤©ï¼‰ */
  growthTrend: GrowthTrendPoint[];
  /** æ–°ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼ˆé€šå¸¸ä¸ºæœ€è¿‘ 30 å¤©ï¼‰ */
  newUsersStats: NewUsersStats | null;
  /** ç”¨æˆ·æ˜¯å¦å·²ç™»å½• */
  isLoggedIn: boolean;
  /** å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰ç®¡ç†æƒé™ */
  canManage: boolean;
  /** è¯ä¹¦ç®¡ç†é¡µé¢ URLï¼ˆå¦‚æœç”¨æˆ·æœ‰ç®¡ç†æƒé™ï¼‰ */
  managementUrl?: string;
}

// ============================================================================
// ğŸ¯ é¢„è®¾ç®¡ç†æ¥å£
// ============================================================================

/**
 * èµ›é¡¹æ¥å£
 * è¡¨ç¤ºèµ›è€ƒä¸‹çš„å•ä¸ªèµ›é¡¹
 */
export interface ExamEvent {
  /** èµ›é¡¹åç§° */
  name: string;
  /** èµ›é¡¹æè¿°ï¼ˆå¯é€‰ï¼‰ */
  description?: string;
}

/**
 * è¯ä¹¦é¢„è®¾æ¥å£
 * ç”¨äºç®¡ç†æ¯”èµ›/è€ƒçº§çš„é¢„è®¾é…ç½®
 */
export interface CertificatePreset {
  /** é¢„è®¾ID */
  _id?: string;
  /** é¢„è®¾ç±»å‹ï¼šç«èµ›(competition) æˆ– è€ƒçº§(certification) */
  type: 'competition' | 'certification';
  /** é¢„è®¾åç§°ï¼ˆæ¯”èµ›/è€ƒçº§åç§°ï¼‰ */
  name: string;
  /** è®¤è¯æœºæ„ */
  certifyingBody: string;
  /** æƒé‡å€¼ */
  weight?: number;
  /** æè¿° */
  description?: string;
  /** èµ›é¡¹åˆ—è¡¨ */
  events?: ExamEvent[];
  /** æ˜¯å¦å¯ç”¨ */
  enabled: boolean;
  /** åˆ›å»ºæ—¶é—´ */
  createdAt?: string | Date;
  /** æ›´æ–°æ—¶é—´ */
  updatedAt?: string | Date;
}

// ============================================================================
// ğŸ¯ è¯ä¹¦ç®¡ç†é¡µé¢æ•°æ®æ¥å£
// ============================================================================

/**
 * è¯ä¹¦ä¿¡æ¯æ¥å£
 * è¡¨ç¤ºå•ä¸ªè¯ä¹¦çš„å®Œæ•´ä¿¡æ¯
 */
export interface CertificateInfo {
  /** è¯ä¹¦ IDï¼ˆå¯é€‰ï¼Œæ–°å»ºæ—¶ä¸ºç©ºï¼‰ */
  _id?: string;
  /** ç”¨æˆ· ID */
  uid: number;
  /** ç”¨æˆ·å */
  username?: string;
  /** è¯ä¹¦åç§° */
  certificateName: string;
  /** é¢å‘æœºæ„ */
  certifyingBody: string;
  /** è¯ä¹¦åˆ†ç±» */
  category: string;
  /** è¯ä¹¦ç­‰çº§ï¼ˆå¯é€‰ï¼‰ */
  level?: string;
  /** è¯ä¹¦åˆ†æ•°ï¼ˆå¯é€‰ï¼‰ */
  score?: number;
  /** é¢å‘æ—¥æœŸ */
  issueDate: string | Date;
  /** è¿‡æœŸæ—¥æœŸï¼ˆå¯é€‰ï¼‰ */
  expiryDate?: string | Date;
  /** è¯ä¹¦å›¾ç‰‡ URLï¼ˆå¯é€‰ï¼‰ */
  certificateImageUrl?: string;
  /** è¯ä¹¦å›¾ç‰‡ keyï¼ˆä¸ƒç‰›äº‘å­˜å‚¨ keyï¼Œå¯é€‰ï¼‰ */
  certificateImageKey?: string;
  /** å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰ */
  notes?: string;
  /** è¯ä¹¦çŠ¶æ€ï¼ˆactive, expired, revoked ç­‰ï¼‰ */
  status?: string;
  /** è¯ä¹¦ä»£ç ï¼ˆå¯é€‰ï¼‰ */
  certificateCode?: string;
  /** è¯ä¹¦è®°å½•æ—¶é—´ï¼ˆå¯é€‰ï¼‰ */
  recordedAt?: string | Date;
  /** è¯ä¹¦åˆ›å»ºæ—¶é—´ï¼ˆå¯é€‰ï¼‰ */
  createdAt?: string | Date;
}

/**
 * è¯ä¹¦ç®¡ç†é¡µé¢æ•°æ®æ¨¡å‹
 */
export interface CertificateManagementData {
  /** æ‰€æœ‰è¯ä¹¦åˆ—è¡¨ */
  certificates: CertificateInfo[];
  /** è¯ä¹¦æ€»æ•° */
  totalCertificates: number;
  /** è¯ä¹¦åˆ†ç±»ç»Ÿè®¡ */
  categoryStats: Record<string, number>;
  /** å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰ç®¡ç†æƒé™ */
  canManage: boolean;
}

// ============================================================================
// ğŸ”„ API å“åº”æ¥å£
// ============================================================================

/**
 * é€šç”¨ API æˆåŠŸå“åº”
 */
export interface ApiSuccessResponse<T = any> {
  /** æ“ä½œæ˜¯å¦æˆåŠŸ */
  success: true;
  /** è¿”å›çš„æ•°æ® */
  data?: T;
  /** æˆåŠŸæ¶ˆæ¯ */
  message?: string;
}

/**
 * é€šç”¨ API é”™è¯¯å“åº”
 */
export interface ApiErrorResponse {
  /** æ“ä½œæ˜¯å¦æˆåŠŸ */
  success: false;
  /** é”™è¯¯æ¶ˆæ¯ */
  error: string;
}

/**
 * é€šç”¨ API å“åº”ç±»å‹
 */
export type ApiResponse<T = any> = ApiSuccessResponse<T> | ApiErrorResponse;

// ============================================================================
// âš™ï¸ åº”ç”¨çŠ¶æ€æ¥å£
// ============================================================================

/**
 * åº”ç”¨çŠ¶æ€ç®¡ç†æ¥å£
 * ç”¨äºç»„ä»¶é—´çŠ¶æ€ç®¡ç†
 */
export interface AppState {
  /** å½“å‰æ¿€æ´»çš„é€‰é¡¹å¡ */
  activeTab: 'overview' | 'leaderboard' | 'trend';
  /** æ˜¯å¦æ­£åœ¨åŠ è½½ */
  isLoading: boolean;
  /** æ˜¯å¦æœ‰é”™è¯¯ */
  hasError: boolean;
  /** é”™è¯¯æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰ */
  errorMessage?: string;
}

// ============================================================================
// ğŸ¯ ç»„ä»¶å±æ€§æ¥å£
// ============================================================================

/**
 * ç»Ÿè®¡å¡ç‰‡ç»„ä»¶å±æ€§
 */
export interface StatCardProps {
  /** å¡ç‰‡æ ‡é¢˜ */
  title: string;
  /** å¡ç‰‡æ•°å€¼ */
  value: string | number;
  /** å‰¯æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰ */
  subtitle?: string;
  /** å¡ç‰‡å›¾æ ‡ï¼ˆå¯é€‰ï¼‰ */
  icon?: string;
}

/**
 * æ’è¡Œæ¦œé¡¹ç»„ä»¶å±æ€§
 */
export interface LeaderboardItemProps {
  /** æ’è¡Œæ¦œæ¡ç›®æ•°æ® */
  entry: LeaderboardEntry;
  /** ç”¨æˆ·åï¼ˆé€šè¿‡ props ä¼ é€’ï¼‰ */
  username?: string;
}

// æ³¨ï¼šæ‰€æœ‰ç±»å‹/æ¥å£éƒ½é€šè¿‡ export interface æˆ– export type åœ¨å®šä¹‰å¤„å¯¼å‡º
