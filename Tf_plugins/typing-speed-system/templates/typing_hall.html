{% extends "layout/basic.html" %}

{% block content %}
<!-- Main Container -->
<div class="main-container">
    <!-- React App 挂载点 -->
    <div id="typing-hall-react-app"></div>

    <!-- 数据传递给 React -->
    <script id="typing-hall-data" type="application/json">
    {
        "globalStats": {{ globalStatsJSON | safe }},
        "userStats": {{ userStatsJSON | safe }},
        "userMaxRank": {{ userMaxRank if userMaxRank else 'null' }},
        "userAvgRank": {{ userAvgRank if userAvgRank else 'null' }},
        "maxWpmRanking": {{ maxWpmRankingJSON | safe }},
        "avgWpmRanking": {{ avgWpmRankingJSON | safe }},
        "improvementRanking": {{ improvementRankingJSON | safe }},
        "recentRecords": {{ recentRecordsJSON | safe }},
        "userSpeedPoints": {{ userSpeedPointsJSON | safe }},
        "weeklyTrend": {{ weeklyTrendJSON | safe }},
        "udocs": {{ udocsJSON | safe }},
        "canManage": {{ 'true' if canManage else 'false' }},
        "isLoggedIn": {{ 'true' if isLoggedIn else 'false' }},
        "currentUserId": {{ handler.user._id if isLoggedIn else 'null' }}
    }
    </script>
</div>


{% endblock %}
