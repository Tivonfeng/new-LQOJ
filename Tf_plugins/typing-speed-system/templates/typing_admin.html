{% extends "layout/basic.html" %}

{% block content %}
<div id="typing-admin-react-app"></div>

<!-- 传递最近记录数据给 React 组件 -->
<script>
// 最近打字记录数据（前端分页）
window.TypingAdminRecentRecords = {
  records: [
    {% for record in recentRecords %}
    {
      _id: '{{ record._id|escape }}',
      uid: '{{ record.uid|escape }}',
      wpm: {{ record.wpm or 0 }},
      note: '{{ record.note|default("", true)|escape }}',
      createdAt: '{{ record.createdAt|string|escape }}'
    }{{ "," if not loop.last else "" }}
    {% endfor %}
  ],
  users: {
    {% if udocs %}
      {% for uid, user in udocs %}
      '{{ uid|escape }}': {
        uname: '{{ user.uname|default("", true)|escape }}',
        displayName: '{{ user.displayName|default("", true)|escape }}'
      }{{ "," if not loop.last else "" }}
      {% endfor %}
    {% endif %}
  }
};

// 打字大厅 URL
window.typingHallUrl = '{{ url("typing_hall") }}';
</script>

{% endblock %}
