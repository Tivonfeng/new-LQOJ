# VuePress Hopeä¸»é¢˜æ–‡æ¡£é›†æˆæ’ä»¶

è¿™æ˜¯ä¸€ä¸ªç”¨äºåœ¨Hydro OJä¸­é›†æˆVuePress Hopeä¸»é¢˜æ–‡æ¡£çš„æ’ä»¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **å®Œæ•´é›†æˆ**: å°†VuePress Hopeä¸»é¢˜æ„å»ºçš„é™æ€æ–‡æ¡£å®Œç¾é›†æˆåˆ°Hydroä¸­
- ğŸ¨ **ä¸»é¢˜é€‚é…**: è‡ªåŠ¨é€‚é…Hydroä¸»é¢˜è‰²å½©å’Œæ ·å¼
- ğŸ”’ **æƒé™é›†æˆ**: æ”¯æŒHydroç”¨æˆ·æƒé™å’Œç™»å½•çŠ¶æ€
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®
- ğŸ–¼ï¸ **åŒæ¨¡å¼æ˜¾ç¤º**: æ”¯æŒç›´æ¥æ˜¾ç¤ºå’Œæ¡†æ¶æ¨¡å¼ä¸¤ç§å±•ç¤ºæ–¹å¼
- ğŸ”„ **SPAè·¯ç”±**: å®Œæ•´æ”¯æŒVuePressçš„å•é¡µé¢åº”ç”¨è·¯ç”±
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: é™æ€èµ„æºç¼“å­˜å’ŒåŠ è½½ä¼˜åŒ–

## å®‰è£…å’Œä½¿ç”¨

### 1. å‡†å¤‡VuePressé¡¹ç›®

é¦–å…ˆç¡®ä¿æ‚¨çš„VuePress Hopeä¸»é¢˜é¡¹ç›®å·²ç»æ„å»ºå®Œæˆï¼š

```bash
# åœ¨æ‚¨çš„VuePressé¡¹ç›®ç›®å½•
npm run build
# æˆ–
yarn build
```

æ„å»ºåä¼šç”Ÿæˆ `docs/.vuepress/dist` ç›®å½•ã€‚

### 2. å®‰è£…æ’ä»¶

å°†æ’ä»¶æ”¾ç½®åˆ°Hydroçš„æ’ä»¶ç›®å½•ï¼š

```bash
cp -r vuepress-docs-plugin /path/to/hydro/Tf_plugins/
```

### 3. å¤åˆ¶VuePressæ„å»ºæ–‡ä»¶

å°†VuePressæ„å»ºçš„distç›®å½•å¤åˆ¶åˆ°æ’ä»¶ä¸­ï¼š

```bash
cp -r /path/to/your/vuepress/docs/.vuepress/dist /path/to/hydro/Tf_plugins/vuepress-docs-plugin/
```

### 4. å®‰è£…ä¾èµ–

```bash
cd /path/to/hydro/Tf_plugins/vuepress-docs-plugin
npm install
```

### 5. é…ç½®VuePressé¡¹ç›®

åœ¨æ‚¨çš„VuePressé…ç½®æ–‡ä»¶ä¸­ï¼Œç¡®ä¿baseè·¯å¾„è®¾ç½®æ­£ç¡®ï¼š

```typescript
// vuepress.config.ts
export default defineUserConfig({
  base: "/docs/",  // é‡è¦ï¼šä¸æ’ä»¶è·¯å¾„ä¿æŒä¸€è‡´
  // å…¶ä»–é…ç½®...
});
```

### 6. é‡å¯Hydro

é‡å¯HydroæœåŠ¡ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨åŠ è½½ã€‚

## é…ç½®é€‰é¡¹

æ’ä»¶æ”¯æŒä»¥ä¸‹é…ç½®é€‰é¡¹ï¼š

```typescript
{
  enabled: true,           // æ˜¯å¦å¯ç”¨æ’ä»¶
  basePath: '/docs',       // æ–‡æ¡£è®¿é—®è·¯å¾„
  title: 'Documentation',  // æ–‡æ¡£æ ‡é¢˜
  showInNav: true,         // æ˜¯å¦åœ¨å¯¼èˆªæ æ˜¾ç¤º
  frameMode: false         // æ˜¯å¦ä½¿ç”¨æ¡†æ¶æ¨¡å¼
}
```

## è®¿é—®æ–‡æ¡£

### ç›´æ¥æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- è®¿é—®è·¯å¾„ï¼š`http://your-hydro-domain/docs`
- VuePressæ–‡æ¡£å°†ç›´æ¥åœ¨é¡µé¢ä¸­æ˜¾ç¤º

### æ¡†æ¶æ¨¡å¼
- è®¾ç½® `frameMode: true`
- è®¿é—®è·¯å¾„ï¼š`http://your-hydro-domain/docs`
- æ–‡æ¡£å°†åœ¨Hydroæ¡†æ¶å†…æ˜¾ç¤ºï¼Œå¸¦æœ‰é¢å¤–çš„æ§åˆ¶åŠŸèƒ½

## ç›®å½•ç»“æ„

```
vuepress-docs-plugin/
â”œâ”€â”€ package.json                    # æ’ä»¶é…ç½®
â”œâ”€â”€ index.ts                       # æ’ä»¶ä¸»å…¥å£
â”œâ”€â”€ dist/                          # VuePressæ„å»ºè¾“å‡ºï¼ˆéœ€è¦æ‚¨æ‰‹åŠ¨å¤åˆ¶ï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ assets/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/
â”‚   â””â”€â”€ handlers/
â”‚       â””â”€â”€ VuePressHandler.ts     # å¤„ç†å™¨å®ç°
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ docs_frame.html           # æ¡†æ¶æ¨¡å¼æ¨¡æ¿
â””â”€â”€ README.md                     # è¯´æ˜æ–‡æ¡£
```

## ç‰¹æ®ŠåŠŸèƒ½

### 1. Hydroä¸Šä¸‹æ–‡æ³¨å…¥

æ’ä»¶ä¼šè‡ªåŠ¨å°†Hydroçš„ç”¨æˆ·ä¿¡æ¯å’ŒåŸŸä¿¡æ¯æ³¨å…¥åˆ°VuePressé¡µé¢ä¸­ï¼š

```javascript
// åœ¨VuePressé¡µé¢ä¸­å¯ä»¥è®¿é—®
window.__HYDRO_CONTEXT__ = {
  user: {
    _id: "user_id",
    uname: "username",
    displayName: "æ˜¾ç¤ºåç§°",
    priv: æƒé™å€¼
  },
  domain: {
    _id: "domain_id", 
    name: "åŸŸå"
  },
  basePath: "/docs",
  isHydroEmbedded: true
}
```

### 2. ä¸»é¢˜æ ·å¼é€‚é…

æ’ä»¶ä¼šè‡ªåŠ¨æ³¨å…¥Hydroä¸»é¢˜å˜é‡ï¼Œç¡®ä¿æ–‡æ¡£æ ·å¼ä¸Hydroä¿æŒä¸€è‡´ï¼š

```css
:root {
    --hydro-primary: #6366f1;
    --hydro-success: #10b981;
    --hydro-warning: #f59e0b;
    --hydro-error: #ef4444;
}
```

### 3. è·¯ç”±å¤„ç†

æ’ä»¶æ­£ç¡®å¤„ç†VuePressçš„SPAè·¯ç”±ï¼Œç¡®ä¿æ‰€æœ‰æ–‡æ¡£é¡µé¢éƒ½èƒ½æ­£å¸¸è®¿é—®ã€‚

## æ•…éšœæ’é™¤

### 1. æ–‡æ¡£æ— æ³•æ˜¾ç¤º

- æ£€æŸ¥distç›®å½•æ˜¯å¦æ­£ç¡®å¤åˆ¶åˆ°æ’ä»¶ä¸­
- ç¡®è®¤VuePressé¡¹ç›®çš„baseè·¯å¾„é…ç½®ä¸º `/docs/`
- æŸ¥çœ‹Hydroæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### 2. èµ„æºåŠ è½½å¤±è´¥

- ç¡®ä¿assetsç›®å½•å­˜åœ¨ä¸”åŒ…å«CSS/JSæ–‡ä»¶
- æ£€æŸ¥VuePressæ„å»ºæ˜¯å¦æˆåŠŸå®Œæˆ
- éªŒè¯æ–‡ä»¶æƒé™æ˜¯å¦æ­£ç¡®

### 3. æ ·å¼æ˜¾ç¤ºå¼‚å¸¸

- ç¡®è®¤VuePressé¡¹ç›®ä½¿ç”¨çš„æ˜¯Hopeä¸»é¢˜
- æ£€æŸ¥CSSæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

## å¼€å‘è¯´æ˜

### è‡ªå®šä¹‰æ ·å¼

å¦‚æœéœ€è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå¯ä»¥ä¿®æ”¹ `VuePressHandler.ts` ä¸­çš„ `injectHydroContext` æ–¹æ³•ã€‚

### æ·»åŠ APIæ¥å£

å¯ä»¥åœ¨æ’ä»¶ä¸­æ·»åŠ æ–°çš„è·¯ç”±å¤„ç†å™¨æ¥æä¾›APIæ¥å£ï¼š

```typescript
ctx.Route('docs_api', '/docs/api/:action', YourApiHandler);
```

### æƒé™æ§åˆ¶

å¯ä»¥åœ¨å¤„ç†å™¨ä¸­æ·»åŠ æƒé™æ£€æŸ¥ï¼š

```typescript
async prepare() {
    this.checkPerm(PERM.PERM_VIEW);
}
```

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒVuePress Hopeä¸»é¢˜å®Œæ•´é›†æˆ
- æä¾›ç›´æ¥æ¨¡å¼å’Œæ¡†æ¶æ¨¡å¼
- å®ç°Hydroä¸Šä¸‹æ–‡æ³¨å…¥å’Œä¸»é¢˜é€‚é…

## è®¸å¯è¯

æœ¬æ’ä»¶é‡‡ç”¨ AGPL-3.0 è®¸å¯è¯ã€‚